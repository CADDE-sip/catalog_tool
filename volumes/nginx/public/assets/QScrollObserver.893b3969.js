var T=Object.defineProperty;var h=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var v=(e,t,o)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,b=(e,t)=>{for(var o in t||(t={}))y.call(t,o)&&v(e,o,t[o]);if(h)for(var o of h(t))C.call(t,o)&&v(e,o,t[o]);return e};import{c as w}from"./render.ce2d7a1b.js";import{g as x,h as z,i as O}from"./config.7e38babc.js";import{w as P,o as M,f as E,a3 as N,g as Q,Q as j}from"./index.f310304c.js";const u={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},q=Object.keys(u);u.all=!0;function D(e){const t={};for(const o of q)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?u:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}function F(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}const{passive:S}=j,A=["both","horizontal","vertical"];var I=w({name:"QScrollObserver",props:{axis:{type:String,validator:e=>A.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:t}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let i=null,n,f;P(()=>e.scrollTarget,()=>{g(),d()});function s(){i!==null&&i();const a=Math.max(0,z(n)),c=O(n),r={top:a-o.position.top,left:c-o.position.left};if(e.axis==="vertical"&&r.top===0||e.axis==="horizontal"&&r.left===0)return;const p=Math.abs(r.top)>=Math.abs(r.left)?r.top<0?"up":"down":r.left<0?"left":"right";o.position={top:a,left:c},o.directionChanged=o.direction!==p,o.delta=r,o.directionChanged===!0&&(o.direction=p,o.inflectionPoint=o.position),t("scroll",b({},o))}function d(){n=x(f,e.scrollTarget),n.addEventListener("scroll",l,S),l(!0)}function g(){n!==void 0&&(n.removeEventListener("scroll",l,S),n=void 0)}function l(a){if(a===!0||e.debounce===0||e.debounce==="0")s();else if(i===null){const[c,r]=e.debounce?[setTimeout(s,e.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];i=()=>{r(c),i=null}}}const m=Q();return M(()=>{f=m.proxy.$el.parentNode,d()}),E(()=>{i!==null&&i(),g()}),Object.assign(m.proxy,{trigger:l,getPosition:()=>o}),N}});export{I as Q,D as g,F as s};
