(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"01b6":function(e,t,a){"use strict";var i=a("6c89"),l=a.n(i);l.a},"6c89":function(e,t,a){},baed:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[[a("div",{staticClass:"q-layout-padding flex justify-center content-center"},[a("q-card",{staticClass:"q-card-background-white",staticStyle:{"max-width":"80%",width:"100%"}},[a("q-card-section",[a("div",{staticClass:"col-sm-10 offset-sm-1 text-center q-mt-lg"},[a("q-table",{attrs:{columns:e.columns,data:e.tableData,selection:"multiple",selected:e.selected,"row-key":"fileName",separator:"cell","no-data-label":"一時保存されているデータがありません"},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("div",{staticClass:"q-table__title text-weight-bolder"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("一時保存データ一覧")])],1),a("q-space"),a("q-btn",{staticStyle:{width:"12%"},attrs:{outline:"",color:"red",disable:e.noSelectedCatalog,icon:"delete",label:"削除"},on:{click:function(t){return e.btnConfirmSelectedDelete()}}})]},proxy:!0},{key:"body-cell-saved",fn:function(t){return[a("q-td",{key:"fileName",staticStyle:{width:"15%"},attrs:{props:t}},[e._v(e._s(t.row.saved))])]}},{key:"body-cell-restart",fn:function(t){return[a("q-td",{staticStyle:{width:"15%"}},[a("q-btn",{staticClass:"full-width",attrs:{outline:"",color:"secondary",label:"再開",icon:"edit",field:"restart"},on:{click:function(a){return e.editRow(t)}}})],1)]}},{key:"body-cell-delete",fn:function(t){return[a("q-td",{staticStyle:{width:"15%"}},[a("q-btn",{staticClass:"full-width",attrs:{outline:"",color:"red",label:"削除",icon:"delete",field:"delete"},on:{click:function(a){return e.btnConfirmOneDelete(t)}}})],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),a("DeleteDialog",{attrs:{dialogInfo:e.deleteDialog},on:{"delete-one-catalog-data":e.deleteRow,"delete-selected-catalog-data":e.deleteSelectedRows}})],1)],1)],1)]],2)},l=[],s=(a("a4d3"),a("e01a"),a("fb6a"),a("4e82"),a("a434"),a("96cf"),a("c973")),o=a.n(s),r=a("bc3a"),n=a.n(r),c=a("d6bd"),d="/api/v1/catalog/tool",p={components:{DeleteDialog:c["a"]},data:function(){return{columns:[{name:"fileName",align:"left",label:"ファイル名",sortable:!0,field:"fileName"},{name:"saved",align:"left",label:"保存日",sortable:!0,field:"saved"},{name:"restart",align:"left",field:"restart"},{name:"delete",align:"left",field:"delete"}],tableData:[],props:"",tmpDataList:[],tmpOnepDataDeleteWindow:!1,tmpSelectedDataDeleteWindow:!1,oneFieDelete:!0,selected:[],noSelectedCatalog:!0,deleteDialog:{pageName:"",isDisplay:!1,catalogName:""}}},mounted:function(){var e=this;n.a.get(d+"/temporal").then(function(){var t=o()(regeneratorRuntime.mark((function t(a){var i,l,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.tmpDataList=a.data,e.tmpDataList.sort((function(e,t){return t.tmpFile.saved-e.tmpFile.saved})),console.log("this.tmpDataList",e.tmpDataList),i=0;i<e.tmpDataList.length;i++)l=e.tmpDataList[i].tmpFile.saved,s=l.slice(0,4)+"/"+l.slice(4,6)+"/"+l.slice(6,8)+" "+l.slice(8,10)+":"+l.slice(10,12)+":"+l.slice(12,14),o={fileName:e.tmpDataList[i].tmpFile.tmp_file_name,saved:s},e.tableData.push(o);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},watch:{tableData:function(e,t){this.tableData=e},selected:function(e){e.length?this.noSelectedCatalog=!1:this.noSelectedCatalog=!0}},methods:{btnActionMoveSelectMode:function(){this.$parent.nowDisplay="select"},commitDatasetinfo:function(e){this.$store.commit("updateDatasetinfo",{catalogTitle:e.title,catalogDescription:e.notes,datasetDescriptionUrl:e.url,datasetIdForDetail:e.caddec_dataset_id_for_detail,registOrg:e.regist_org,publisherId:e.caddec_provider_id,publisher:e.publisher_name,publisherUrl:e.publisher_uri,creator:e.creator_name,creatorUrl:e.creator_url,contactPoint:e.contact_name,contactPointUrl:e.contact_url,storeType:"state"})},commitDatajacket:function(e){var t=[];if(e.length)for(var a=0;a<e.length;a++){if(e[a].contractRequired&&e[a].contractRequired.label&&e[a].contractRequired.value)var i=e[a].contractRequired.label,l=e[a].contractRequired.value;if(e[a].connectRequired&&e[a].connectRequired.label&&e[a].connectRequired.value)var s=e[a].connectRequired.label,o=e[a].connectRequired.value;if(e[a].filename)var r=e[a].filename;else r="";if(e[a].dataname)var n=e[a].dataname;else n="";if(e[a].description)var c=e[a].description;else c="";if(e[a].dataurl)var d=e[a].dataurl;else d="";if(e[a].accessurl)var p=e[a].accessurl;else p="";if(e[a].downloadurl)var u=e[a].downloadurl;else u="";if(e[a].size)var f=e[a].size;else f="";if(e[a].variables.length>0)var m=e[a].variables;else m=[];if(e[a].mimetype)var g=e[a].mimetype;else g="";if(e[a].format)var _=e[a].format;else _="";if(e[a].schema)var v=e[a].schema;else v="";if(e[a].schemaType)var h=e[a].schemaType;else h="";if(e[a].ngsiTenant)var b=e[a].ngsiTenant;else b="";if(e[a].ngsiServicePath)var y=e[a].ngsiServicePath;else y="";if(e[a].getResourceIDForProvenance)var w=e[a].getResourceIDForProvenance;else w="";if(e[a].resourceIDForProvenance)var D=e[a].resourceIDForProvenance;else D="";if(e[a].resourceType.value)if("file/http"===e[a].resourceType.value)var q="ファイル提供(HTTP)",I="file/http";else"file/ftp"===e[a].resourceType.value?(q="ファイル提供(FTP)",I="file/ftp"):"api/ngsi"===e[a].resourceType.value?(q="API提供(NGSI API)",I="api/ngsi"):(q="",I="");if(e[a].license_title)var k=e[a].license_title;else k="";if(e[a].licenseurl)var S=e[a].licenseurl;else S="";if(e[a].issued)var N=e[a].issued;else N="";if(e[a].label)var C=e[a].label;else C="";t.push({label:C,dataname:n,filename:r,description:c,dataurl:d,accessurl:p,downloadurl:u,size:f,variables:m,mimetype:g,format:_,schema:v,schemaType:h,ngsiTenant:b,ngsiServicePath:y,contractRequired:{label:i,value:l},connectRequired:{label:s,value:o},getResourceIDForProvenance:w,resourceIDForProvenance:D,resourceType:{label:q,value:I},licensetitle:k,licenseurl:S,issued:N})}this.$store.commit("updateFiledataDetails",{filedataDetails:t,storeType:"state"})},commitDatasetoptionalinfo:function(e){this.$store.commit("updateDatasetOptionalInfoParameters",{selectThemes:e.theme,selectTags:e.tags,vocabulary:e.vocabulary,term:e.term,selectLanguage:e.language,frequency:e.frequency,spatialUrl:e.spatial_url,spatialName:e.spatial_text,spatial:e.spatial,start:e.temporal_start,end:e.temporal_end,storeType:"state"})},commitUserterms:function(e){this.$store.commit("updateUserTerms",{selectedTab:e.selected_tab,termName:e.license_title,termNameUrl:e.license_url,usrRight:e.rights,contractType:e.trading_policy_contract_type,secrecy:e.trading_policy_nda,useApplication:e.trading_policy_use_application,useApplicationOther:e.trading_policy_use_application_free,redistributionRange:e.terms_of_use_redistribution_range,redistributionRangeOther:e.terms_of_use_redistribution_range_free,permissionResion:e.terms_of_use_permissible_region,permissionResionOther:e.terms_of_use_permissible_region_free,notices:e.terms_of_use_notices,personalData:e.privacy_policy_contains_personal_data,personalDataOther:e.privacy_policy_contains_personal_data_free,effectivePeriodOfDataSelectTerms:e.usage_period_effective_period_of_data_term,startDate:e.usage_period_effective_period_of_data_start,endDate:e.usage_period_effective_period_of_data_end,effectivePeriodOfDataFreefield:e.usage_period_effective_period_of_data_free,expirationPeriodSelectTerms:e.usage_period_expiration_period_term,deadline:e.usage_period_expiration_period_deadline,period:e.usage_period_expiration_period_period,unit:e.usage_period_expiration_period_unit,expirationPeriodFreefield:e.usage_period_expiration_period_free,fee:e.fee,salesInfoUrl:e.sales_info_url,priceRange:e.pricing_price_range,noticesOfPrice:e.pricing_notices_of_price,expressWarranty:e.warranty_express_warranty,expressWarrantyOther:e.warranty_express_warranty_free,leagalCompliance:e.warranty_legal_compliance,leagalComplianceOther:e.warranty_legal_compliance_free,storeType:"state"})},commitDataForUpdate:function(e){this.$store.commit("updateCkanName",{ckanDataName:e.ckan_data_name}),this.$store.commit("updatAutoSetValue",{issued:e.issued,identifier:e.identifier,datasetUrl:e.dataset_url})},editRow:function(e){for(var t="",a=0;a<this.tmpDataList.length;a++)if(e.row.fileName===this.tmpDataList[a].tmpFile.tmp_file_name){t=this.tmpDataList[a];break}console.log("SelectDraft.vue 登録再開データ",t),this.commitDatasetinfo(t.datasetinfo),this.commitDatajacket(t.datajacket),this.commitDatasetoptionalinfo(t.datasetoptionalinfo),this.commitUserterms(t.userterms),this.commitDataForUpdate(t.dataForUpdate),this.$store.commit("updateMode",{mode:"register",ckanType:"",isBothCatalog:!1}),this.$router.push("/register")},btnConfirmSelectedDelete:function(){this.deleteDialog.pageName="selectDraftSelectedDelete",this.deleteDialog.isDisplay=!0},btnConfirmOneDelete:function(e){this.deleteDialog.pageName="selectDraftOneDelete",this.deleteDialog.isDisplay=!0,this.deleteDialog.catalogName=e.row.fileName},deleteRow:function(e){var t=this,a=[];a.push(e),n.a.request({method:"delete",url:d+"/temporal",data:a}).then(function(){var e=o()(regeneratorRuntime.mark((function e(a){var i,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=a.data.del_data,i.length)for(l=0;l<t.tableData.length;l++)for(s=0;s<i.length;s++)t.tableData[l].fileName===i[s]&&t.tableData.splice(l,1);t.selected=[];case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteSelectedRows:function(){var e=this,t=0,a=[];for(t=0;t<this.selected.length;t++)a.push(this.selected[t].fileName);n.a.request({method:"delete",url:d+"/temporal",data:a}).then(function(){var t=o()(regeneratorRuntime.mark((function t(a){var i,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=a.data.del_data,i.length)for(l=0;l<e.tableData.length;l++)for(s=0;s<i.length;s++)e.tableData[l].fileName===i[s]&&e.tableData.splice(l,1);e.selected=[];case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},u=p,f=(a("01b6"),a("2877")),m=a("4d5a"),g=a("f09f"),_=a("a370"),v=a("eaac"),h=a("2c91"),b=a("9c40"),y=a("db86"),w=a("eebe"),D=a.n(w),q=Object(f["a"])(u,i,l,!1,null,null,null);t["default"]=q.exports;D()(q,"components",{QLayout:m["a"],QCard:g["a"],QCardSection:_["a"],QTable:v["a"],QSpace:h["a"],QBtn:b["a"],QTd:y["a"]})},d6bd:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["userList"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("ユーザ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.userName))]),e._v(" を削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-user-data",e.dialogInfo.userName)}}})],1)])],1)])],1)]:e._e(),"searchOneDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",["release"===e.dialogInfo.ckanType?a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("横断カタログ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.catalogName))]),e._v(" を削除しますか？")])],1):e._e(),"detail"===e.dialogInfo.ckanType?a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("詳細カタログ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.catalogName))]),e._v(" を削除しますか？")])],1):e._e(),"both"===e.dialogInfo.ckanType?a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("紐づく詳細カタログをもつ横断カタログは削除できません。")])],1):e._e(),"release"===e.dialogInfo.ckanType||"detail"===e.dialogInfo.ckanType?a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-one-catalog-data",e.dialogInfo)}}})],1):e._e(),"both"===e.dialogInfo.ckanType?a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}})],1):e._e()])],1)])],1)]:e._e(),"searchSelectedDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("選択したデータを削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-selected-catalog-data")}}})],1)])],1)])],1)]:e._e(),"selectDraftOneDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("一時保存データ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.catalogName))]),e._v(" を削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-one-catalog-data",e.dialogInfo.catalogName)}}})],1)])],1)])],1)]:e._e(),"selectDraftSelectedDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("選択したデータを削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-selected-catalog-data")}}})],1)])],1)])],1)]:e._e()],2)},l=[],s={props:["dialogInfo"]},o=s,r=a("2877"),n=a("24e8"),c=a("f09f"),d=a("a370"),p=a("9c40"),u=a("7f67"),f=a("eebe"),m=a.n(f),g=Object(r["a"])(o,i,l,!1,null,null,null);t["a"]=g.exports;m()(g,"components",{QDialog:n["a"],QCard:c["a"],QCardSection:d["a"],QBtn:p["a"]}),m()(g,"directives",{ClosePopup:u["a"]})}}]);