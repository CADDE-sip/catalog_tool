(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"37ca":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:""},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"25%",width:"100%"}},[a("q-card-section",{staticClass:"column items-center"},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[e.dialogInfo.errorFlg?a("q-avatar",{attrs:{icon:"error","font-size":"30px","text-color":"red"}}):a("q-avatar",{attrs:{icon:"check_circle","font-size":"30px","text-color":"secondary"}}),a("span",{staticClass:"q-ml-sm"},[e._v(e._s(e.dialogInfo.message))])],1),e.dialogInfo.moveOtherPage?a("div",{staticClass:"q-mt-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"閉じる",color:"primary"},on:{click:function(t){return e.$emit("close-dialog",e.dialogInfo.moveOtherPage)}}})],1):a("div",{staticClass:"q-mt-md"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"閉じる",color:"primary"}})],1)])],1)],1)],1)},i=[],r={props:["dialogInfo"]},o=r,l=a("2877"),n=a("24e8"),c=a("f09f"),d=a("a370"),p=a("cb32"),f=a("9c40"),u=a("7f67"),m=a("eebe"),g=a.n(m),h=Object(l["a"])(o,s,i,!1,null,null,null);t["a"]=h.exports;g()(h,"components",{QDialog:n["a"],QCard:c["a"],QCardSection:d["a"],QAvatar:p["a"],QBtn:f["a"]}),g()(h,"directives",{ClosePopup:u["a"]})},"59b4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"userlist"===e.nowDisplay?a("div",{staticClass:"col-12"},[a("UserList")],1):a("div",{staticClass:"col-12"},[a("UserForm")],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-layout-padding flex justify-center content-center"},[a("q-card",{staticClass:"q-card-background-white",staticStyle:{"max-width":"95%",width:"100%"},attrs:{"q-card":""}},[a("q-card-section",[a("div",{staticClass:"row justify-center items-center full-width"},[a("q-table",{staticClass:"full-width",attrs:{title:"ユーザ一覧",data:e.userList,columns:e.columns,separator:"cell",pagination:e.pagination,"row-key":"name"},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("div",{staticClass:"q-table__title text-weight-bolder full-width row justify-between"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("ユーザ一覧")]),a("q-btn",{attrs:{size:"md",color:"light-blue-10",label:"新規登録"},on:{click:function(t){e.$parent.formType="new",e.$parent.nowDisplay="userform"}}})],1)]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"name",attrs:{props:t}},[a("div",{staticClass:"indent-cell"},[e._v(e._s(t.row.name))])]),a("q-td",{key:"name",attrs:{props:t}},[a("div",{staticClass:"indent-cell"},[e._v(e._s(t.row.organization))])]),a("q-td",{key:"name",attrs:{props:t}},[a("div",{staticClass:"indent-cell"},[e._v(e._s(t.row.email))])]),a("q-td",{key:"name",attrs:{props:t}},[a("div",{staticClass:"indent-cell",staticStyle:{"min-width":"66px"}},[e._v(e._s(t.row.created))])]),a("q-td",{key:"update",attrs:{props:t}},[a("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1em","min-width":"100px"},attrs:{outline:"",color:"secondary",icon:"edit",label:"編集"},on:{click:function(a){e.$parent.username=t.row.name,e.$parent.formType="edit",e.$parent.nowDisplay="userform"}}})],1),a("q-td",{key:"editPass",attrs:{props:t}},[a("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1em","min-width":"170px"},attrs:{outline:"",color:"secondary",icon:"lock",label:"パスワード変更"},on:{click:function(a){e.passUpdateDialog.isDisplay=!0,e.passUpdateDialog.userName=t.row.name,e.passUpdateDialog.email=t.row.email}}})],1),a("q-td",{key:"delete",attrs:{props:t}},[a("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1em","min-width":"100px"},attrs:{outline:"",color:"red",icon:"delete",label:"削除"},on:{click:function(a){e.deleteDialog.isDisplay=!0,e.deleteDialog.userName=t.row.name}}})],1)],1)]}}])})],1)])],1),a("CompleteDialog",{attrs:{dialogInfo:e.completeDialog}}),a("DeleteDialog",{attrs:{dialogInfo:e.deleteDialog},on:{"delete-user-data":e.deleteUser}}),a("PasswordUpdateDialog",{ref:"passwordUpdateDialog",attrs:{dialogInfo:e.passUpdateDialog},on:{"update-pass":e.updatePass}})],1)},o=[],l=a("bc3a"),n=a.n(l),c=a("f508"),d=a("37ca"),p=a("d6bd"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"45%",width:"100%"}},[a("q-bar",{staticClass:"bg-primary text-white"},[a("q-icon",{attrs:{name:"lock"}}),a("div",[a("font",{attrs:{size:"3"}},[e._v("パスワード設定")])],1),a("q-space")],1),a("q-card-section",[a("div",{staticClass:"column"},[a("div",{staticClass:"row items-center justify-center q-py-sm"},[a("q-input",{ref:"oldPass",staticStyle:{width:"95%"},attrs:{outlined:"",dense:"",rules:[e.requiredRule,e.passwordRules.minlength,e.passwordRules.regex],"hide-bottom-space":""},scopedSlots:e._u([{key:"before",fn:function(){return[a("div",{staticClass:"text-right indent-cell",staticStyle:{width:"162px","text-align":"right",color:"#000"}},[a("font",{attrs:{size:"3"}},[e._v("古いパスワード ： ")])],1)]},proxy:!0}]),model:{value:e.oldPass,callback:function(t){e.oldPass=t},expression:"oldPass"}})],1),a("div",{staticClass:"row items-center justify-center q-py-sm"},[a("q-input",{ref:"newPass",staticStyle:{width:"95%"},attrs:{outlined:"",dense:"",rules:[e.requiredRule,e.passwordRules.minlength,e.passwordRules.regex],"hide-bottom-space":""},scopedSlots:e._u([{key:"before",fn:function(){return[a("div",{staticClass:"text-right indent-cell",staticStyle:{width:"162px","text-align":"right",color:"#000"}},[a("font",{attrs:{size:"3"}},[e._v("新しいパスワード ： ")])],1)]},proxy:!0}]),model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}})],1),a("div",{staticClass:"row items-center justify-center q-py-sm"},[a("q-input",{ref:"checkNewPass",staticStyle:{width:"95%"},attrs:{outlined:"",dense:"",rules:[e.requiredRule,e.passwordRules.minlength,e.passwordRules.checkPass,e.passwordRules.regex],"hide-bottom-space":""},scopedSlots:e._u([{key:"before",fn:function(){return[a("div",{staticClass:"text-right indent-cell",staticStyle:{width:"162px","text-align":"right",color:"#000"}},[a("font",{attrs:{size:"3"}},[e._v("パスワードの確認 ： ")])],1)]},proxy:!0}]),model:{value:e.checkNewPass,callback:function(t){e.checkNewPass=t},expression:"checkNewPass"}})],1)])]),a("q-card-section",{staticStyle:{"padding-top":"0"}},[a("div",{staticClass:"q-gutter-md row justify-center"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"},on:{click:function(t){e.oldPass="",e.newPass="",e.checkNewPass=""}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"変更"},on:{click:e.validate}})],1)])],1)],1)],1)},u=[],m={props:["dialogInfo"],data:function(){var e=this;return{requiredRule:function(e){return e&&!!e||"入力必須項目"},passwordRules:{minlength:function(e){return e&&e.length>=12||"パスワードは12文字以上にしてください。"},checkPass:function(t){return t===e.$refs.newPass.value||"新しいパスワードと同じパスワードを入力してください。"},regex:function(e){return/^(?=.*[!-/:-@[-`{-~])(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])[!-~]{12,}$/.test(e)||"パスワードは半角英大文字、半角英小文字、半角数字、半角記号の4種類すべてを含む必要があります。"}},oldPass:"",newPass:"",checkNewPass:""}},methods:{validate:function(){this.$refs.oldPass.validate(),this.$refs.newPass.validate(),this.$refs.checkNewPass.validate(),this.$refs.oldPass.hasError||this.$refs.newPass.hasError||this.$refs.checkNewPass.hasError?(console.log("this.$refs.oldPass.hasError : "+this.$refs.oldPass.hasError),console.log("this.$refs.newPass.hasError : "+this.$refs.newPass.hasError),console.log("this.$refs.checkNewPass.hasError : "+this.$refs.checkNewPass.hasError)):(this.$props.dialogInfo.password=this.checkNewPass,this.$emit("update-pass",this.$props.dialogInfo))},initField:function(){this.oldPass="",this.newPass="",this.checkNewPass=""}}},g=m,h=(a("8071"),a("2877")),v=a("24e8"),w=a("f09f"),y=a("d847"),k=a("0016"),b=a("2c91"),q=a("a370"),C=a("27f9"),_=a("9c40"),x=a("7f67"),$=a("eebe"),D=a.n($),z=Object(h["a"])(g,f,u,!1,null,null,null),P=z.exports;D()(z,"components",{QDialog:v["a"],QCard:w["a"],QBar:y["a"],QIcon:k["a"],QSpace:b["a"],QCardSection:q["a"],QInput:C["a"],QBtn:_["a"]}),D()(z,"directives",{ClosePopup:x["a"]});var N={components:{CompleteDialog:d["a"],DeleteDialog:p["a"],PasswordUpdateDialog:P},data:function(){return{pagination:{rowsPerPage:10},selectedUser:"",completeDialog:{isDisplay:!1,message:"",errorFlg:!1,moveOtherPage:""},passUpdateDialog:{isDisplay:!1,userName:"",email:"",password:""},deleteDialog:{pageName:"userList",isDisplay:!1,userName:""},userList:[],columns:[{name:"name",label:"ユーザ名",field:"name",align:"left",sortable:!0},{name:"organization",label:"組織名",field:"organization",align:"left",sortable:!0},{name:"email",label:"メール",field:"email",align:"left",sortable:!0},{name:"created",label:"登録日",field:"created",align:"center",sortable:!0},{name:"update",field:"update",align:"center"},{name:"editPass",field:"editPass",align:"center"},{name:"delete",field:"delete",align:"center"}]}},methods:{fetchUserlist:function(){var e=this;c["a"].show(),n.a.get(this.api_prefix+"/userlist").then((function(t){c["a"].hide(),e.userList=t.data.userlist})).catch((function(e){c["a"].hide(),console.error(e),console.log(e.response.message)}))},deleteUser:function(e){var t=this;c["a"].show(),n.a.delete(this.api_prefix+"/users/"+e).then((function(e){c["a"].hide(),t.fetchUserlist(),t.completeDialog.message=e.data.message.release,console.log("横断CKAN: "+e.data.message.release+", 詳細CKAN: "+e.data.message.detail),t.completeDialog.isDisplay=!0})).catch((function(e){console.error(e),c["a"].hide(),t.fetchUserlist(),console.log(e.response.data.message.error+", 横断CKAN: "+e.response.data.message.release+", 詳細CKAN: "+e.response.data.message.detail)}))},updatePass:function(e){var t=this;c["a"].show(),console.log(e),n.a.put(this.api_prefix+"/users/password/"+e.userName,{email:e.email,password:e.password}).then((function(e){c["a"].hide(),t.fetchUserlist(),console.log(e),t.completeDialog.message=e.data.message.release,t.completeDialog.isDisplay=!0,t.$refs.passwordUpdateDialog.initField()})).catch((function(e){c["a"].hide(),console.log(e),t.fetchUserlist()}))}},created:function(){this.fetchUserlist()}},I=N,S=(a("740b"),a("4d5a")),U=a("eaac"),F=a("bd08"),A=a("db86"),Q=Object(h["a"])(I,r,o,!1,null,null,null),R=Q.exports;D()(Q,"components",{QLayout:S["a"],QCard:w["a"],QCardSection:q["a"],QTable:U["a"],QBtn:_["a"],QTr:F["a"],QTd:A["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"q-layout-padding"},[a("q-card",{staticClass:"q-mt-sm q-card-background-white"},[a("q-card-section",[a("div",{staticClass:"col"},["new"===e.$parent.formType?a("div",[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("ユーザ名")]),a("br"),e._v("\n            登録するユーザ名を入力してください。\n            "),a("q-input",{ref:"username",staticStyle:{"padding-left":"15px",width:"98%"},attrs:{rules:[e.requiredRule,e.checkHyphen,e.checkLength,e.noJapaneseRule.regex],counter:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1):a("div",[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("ユーザ名")]),a("br"),e._v("\n            登録するユーザ名を入力してください。\n            "),a("q-input",{ref:"username",staticStyle:{"padding-left":"15px",width:"98%"},attrs:{disable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),"new"===e.$parent.formType?a("div",{staticClass:"q-mt-md"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("パスワード")]),a("br"),e._v("\n            登録するユーザのパスワードを入力してください。\n            "),a("q-input",{ref:"password",staticStyle:{"padding-left":"15px",width:"98%"},attrs:{type:e.isPwd?"password":"text",rules:[e.requiredRule,e.passRules.minlength,e.passRules.regex]},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[a("q-icon",{staticClass:"cursor-pointer",attrs:{size:"32px",name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})],1)],1):e._e(),a("div",{staticClass:"q-mt-md"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("組織名")]),a("br"),e._v("\n            登録するユーザの組織名を入力してください。"),a("br"),e._v("\n            複数ある場合は、カンマ区切りで入力してください。"),a("br"),e._v("\n            例: org-a,org-b\n            "),a("q-input",{ref:"organization",staticStyle:{"padding-left":"15px",width:"98%"},attrs:{rules:[e.noJapaneseRule.regex,e.noLastCommaRule.regex],error:e.orgMandatoryFlg,"error-message":e.orgMandatoryFlg?"【入力必須項目】":""},on:{blur:function(t){return e.checkeOrgMandatory()}},model:{value:e.form.organization,callback:function(t){e.$set(e.form,"organization",t)},expression:"form.organization"}}),a("div",{staticClass:"q-mt-md"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("メール")]),a("br"),e._v("\n            登録するユーザのメールアドレスを入力してください。\n            "),a("q-input",{ref:"email",staticStyle:{"padding-left":"15px",width:"98%"},attrs:{rules:[e.requiredRule,e.emailRules.regex,e.checkHyphen]},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"q-mt-md"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("登録先カタログサイト")]),a("br"),e._v("\n              入力したカタログ情報の登録先カタログサイトを選択してください。\n              "),a("br"),a("q-radio",{attrs:{val:"internal",label:"ローカルカタログサイト"},model:{value:e.form.ckan,callback:function(t){e.$set(e.form,"ckan",t)},expression:"form.ckan"}}),a("q-radio",{attrs:{val:"external",label:"外部カタログサイト"},model:{value:e.form.ckan,callback:function(t){e.$set(e.form,"ckan",t)},expression:"form.ckan"}})],1),"external"===e.form.ckan?a("div",{staticClass:"q-mt-md"},[a("div",[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("外部横断カタログサイトURL")]),a("br"),e._v("\n                外部のカタログサイトへ登録する場合、対象カタログサイトのURLを入力してください。\n                "),a("q-input",{ref:"releaseCkanUrl",staticStyle:{"padding-left":"15px",width:"98%"},attrs:{rules:[e.requiredRule]},model:{value:e.form.releaseCkanUrl,callback:function(t){e.$set(e.form,"releaseCkanUrl",t)},expression:"form.releaseCkanUrl"}})],1),a("div",{staticClass:"q-mt-md"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("外部横断カタログサイトアプリキー")]),a("br"),e._v("\n                外部のカタログサイトへ登録する場合、対象カタログサイトのアプリキーを入力してください。\n                "),a("q-input",{ref:"releaseCkanApikey",staticStyle:{"padding-left":"15px",width:"98%"},attrs:{rules:[e.requiredRule]},model:{value:e.form.releaseCkanApikey,callback:function(t){e.$set(e.form,"releaseCkanApikey",t)},expression:"form.releaseCkanApikey"}})],1),a("div",{staticClass:"q-mt-md"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("外部詳細カタログサイトURL")]),a("br"),e._v("\n                外部のカタログサイトへ登録する場合、対象カタログサイトのURLを入力してください。\n                "),a("q-input",{staticStyle:{"padding-left":"15px",width:"98%"},model:{value:e.form.detailCkanUrl,callback:function(t){e.$set(e.form,"detailCkanUrl",t)},expression:"form.detailCkanUrl"}})],1),a("div",{staticClass:"q-mt-md"},[a("font",{attrs:{size:"5",color:"#1d468f"}},[e._v("外部詳細カタログサイトアプリキー")]),a("br"),e._v("\n                外部のカタログサイトへ登録する場合、対象カタログサイトのアプリキーを入力してください。\n                "),a("q-input",{ref:"detailCkanApikey",staticStyle:{"padding-left":"15px",width:"98%"},model:{value:e.form.detailCkanApikey,callback:function(t){e.$set(e.form,"detailCkanApikey",t)},expression:"form.detailCkanApikey"}})],1)]):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.errorFlg,expression:"errorFlg"}]},[a("font",{attrs:{size:"3",color:"#FF0000"}},[e._v(e._s(e.errorMessage))])],1)],1)])])],1),a("CompleteDialog",{attrs:{dialogInfo:e.completeDialog},on:{"close-dialog":function(t){e.$parent.nowDisplay=t}}}),a("q-footer",{attrs:{reveal:"",elevated:""}},[a("q-toolbar",{staticClass:"justify-between"},[a("q-btn",{attrs:{flat:"",color:"white",icon:"reply_all",label:"ユーザ一覧に戻る"},on:{click:function(t){e.$parent.nowDisplay="userlist"}}}),"new"===e.$parent.formType?a("div",[a("q-btn",{attrs:{flat:"",color:"white",icon:"save_alt",label:"登録"},on:{click:function(t){return e.validateForm()}}})],1):a("div",[a("q-btn",{attrs:{flat:"",color:"white",icon:"save_alt",label:"編集"},on:{click:function(t){return e.validateForm()}}})],1)],1)],1)],1)])},M=[],j=(a("c975"),a("cca6"),a("ac1f"),a("1276"),{components:{CompleteDialog:d["a"]},data:function(){return{isPwd:!0,pagination:{rowsPerPage:0},completeDialog:{isDisplay:!1,message:"",errorFlg:!1,moveOtherPage:"userlist"},errorFlg:!1,errorMessage:null,form:{username:"",password:"",email:"",organization:"",ckan:"internal",releaseCkanUrl:"",releaseCkanApikey:"",detailCkanUrl:"",detailCkanApikey:""},defaultForm:{username:"",password:"",organization:"",email:"",ckan:"internal",releaseCkanUrl:"",releaseCkanApikey:"",detailCkanUrl:"",detailCkanApikey:""},orgMandatoryFlg:!1,requiredRule:function(e){return e&&!!e||"【入力必須項目】"},checkHyphen:function(e){return e&&-1===e.indexOf("-")||" - (ハイフン)は使用できません。"},checkLength:function(e){return e&&e.length>=2&&e.length<=100||"ユーザ名は2文字以上100文字以下で入力してください。"},passRules:{minlength:function(e){return e&&e.length>=12||"パスワードは12文字以上にしてください。"},regex:function(e){return/^(?=.*[!-/:-@[-`{-~])(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])[!-~]{12,}$/.test(e)||"パスワードは半角英大文字、半角英小文字、半角数字、半角記号の4種類すべてを含む必要があります。"}},emailRules:{regex:function(e){return/^(([^<>()[\]\\.,;:\s@]+(\.[^<>()[\]\\.,;:\s@]+)*)|(.+))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"メールアドレスを正しく入力してください。"}},noJapaneseRule:{regex:function(e){return/^[a-z0-9!-/:-@¥[-`{-~]*$/.test(e)||"半角英小文字半角数字半角記号で入力してください。"}},noLastCommaRule:{regex:function(e){return/^(?!.*,$).*$/.test(e)||"語尾に ,（カンマ）は使用できません。"}}}},watch:{"form.ckan":function(e){"internal"!==this.form.ckan||this.form.organization?this.orgMandatoryFlg=!1:this.orgMandatoryFlg=!0},"form.organization":function(e){"internal"!==this.form.ckan||this.form.organization?this.orgMandatoryFlg=!1:this.orgMandatoryFlg=!0}},methods:{validateForm:function(){"external"===this.form.ckan?(this.$refs.username.validate(),this.$refs.organization.validate(),this.$refs.email.validate(),this.$refs.releaseCkanUrl.validate(),this.$refs.releaseCkanApikey.validate(),"new"===this.$parent.formType&&(this.$refs.password.validate(),this.$refs.password.hasError&&(this.errorFlg=!0,this.errorMessage="入力内容に誤りがあります。")),this.$refs.username.hasError||this.$refs.organization.hasError||this.$refs.email.hasError||this.$refs.releaseCkanUrl.hasError||this.$refs.releaseCkanApikey.hasError?(this.errorFlg=!0,this.errorMessage="入力内容に誤りがあります。"):"new"===this.$parent.formType?this.createUser():this.updateUser()):(this.$refs.username.validate(),this.$refs.organization.validate(),this.$refs.email.validate(),this.checkeOrgMandatory(),"new"===this.$parent.formType&&(this.$refs.password.validate(),this.$refs.password.hasError&&(this.errorFlg=!0,this.errorMessage="入力内容に誤りがあります。")),this.$refs.username.hasError||this.$refs.organization.hasError||this.$refs.email.hasError||this.orgMandatoryFlg?(this.errorFlg=!0,this.errorMessage="入力内容に誤りがあります。"):"new"===this.$parent.formType?this.createUser():this.updateUser())},initForm:function(){var e=this;"edit"===this.$parent.formType?n.a.get(this.api_prefix+"/users/"+this.$parent.username).then((function(t){e.form.username=t.data.username,e.form.email=t.data.email,e.form.organization=t.data.organization,e.form.ckan=t.data.ckan,"external"===t.data.ckan&&(e.form.releaseCkanUrl=t.data.about.release_ckan_url,e.form.releaseCkanApikey=t.data.about.release_ckan_apikey,e.form.detailCkanUrl=t.data.about.detail_ckan_url,e.form.detailCkanApikey=t.data.about.detail_ckan_apikey)})).catch((function(t){e.errorFlg=!0,e.errorMessage=t.response.data.message.detail,c["a"].hide()})):Object.assign(this.form,this.defaultForm)},createUser:function(){var e=this;c["a"].show(),this.form.organization=this.form.organization?this.form.organization.split(","):[],n.a.post(this.api_prefix+"/users",this.form).then((function(t){e.completeDialog.message="登録が完了しました。",console.log("横断CKAN: "+t.data.message.release+"詳細CKAN: "+t.data.message.detail),e.completeDialog.isDisplay=!0,c["a"].hide()})).catch((function(t){e.errorFlg=!0,console.log("エラー内容: "+t.response.data.error+", 横断CKAN: "+t.response.data.message.release+", 詳細CKAN: "+t.response.data.message.detail),e.errorMessage=t.response.data.message.release||t.response.data.message.detail,c["a"].hide()}))},updateUser:function(){var e=this;c["a"].show(),this.form.organization=this.form.organization?this.form.organization.split(","):[],n.a.put(this.api_prefix+"/users/"+this.form.username,this.form).then((function(t){e.completeDialog.message="登録が完了しました。",console.log("横断CKAN: "+t.data.message.release+"詳細CKAN: "+t.data.message.detail),e.completeDialog.isDisplay=!0,c["a"].hide()})).catch((function(t){e.errorFlg=!0,e.errorMessage="入力内容に誤りがあります。",console.log("エラー内容: ,"+t.response.data.error+", 横断CKAN: "+t.response.data.message.release+", 詳細CKAN: "+t.response.data.message.detail),c["a"].hide()}))},checkeOrgMandatory:function(){"internal"!==this.form.ckan||this.form.organization?this.orgMandatoryFlg=!1:this.orgMandatoryFlg=!0}},created:function(){this.initForm()}}),T=j,L=(a("6988"),a("3786")),O=a("7ff0"),K=a("65c6"),B=Object(h["a"])(T,E,M,!1,null,null,null),J=B.exports;D()(B,"components",{QLayout:S["a"],QCard:w["a"],QCardSection:q["a"],QInput:C["a"],QIcon:k["a"],QRadio:L["a"],QFooter:O["a"],QToolbar:K["a"],QBtn:_["a"]});var Z={components:{UserList:R,UserForm:J},data:function(){return{nowDisplay:"userlist",formType:"new",username:""}}},H=Z,G=Object(h["a"])(H,s,i,!1,null,null,null);t["default"]=G.exports},6119:function(e,t,a){},6988:function(e,t,a){"use strict";var s=a("da1b"),i=a.n(s);i.a},"740b":function(e,t,a){"use strict";var s=a("6119"),i=a.n(s);i.a},8071:function(e,t,a){"use strict";var s=a("9afa"),i=a.n(s);i.a},"9afa":function(e,t,a){},d6bd:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["userList"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("ユーザ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.userName))]),e._v(" を削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-user-data",e.dialogInfo.userName)}}})],1)])],1)])],1)]:e._e(),"searchOneDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",["release"===e.dialogInfo.ckanType?a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("横断カタログ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.catalogName))]),e._v(" を削除しますか？")])],1):e._e(),"detail"===e.dialogInfo.ckanType?a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("詳細カタログ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.catalogName))]),e._v(" を削除しますか？")])],1):e._e(),"both"===e.dialogInfo.ckanType?a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("紐づく詳細カタログをもつ横断カタログは削除できません。")])],1):e._e(),"release"===e.dialogInfo.ckanType||"detail"===e.dialogInfo.ckanType?a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-one-catalog-data",e.dialogInfo)}}})],1):e._e(),"both"===e.dialogInfo.ckanType?a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}})],1):e._e()])],1)])],1)]:e._e(),"searchSelectedDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("選択したデータを削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-selected-catalog-data")}}})],1)])],1)])],1)]:e._e(),"selectDraftOneDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("一時保存データ "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.dialogInfo.catalogName))]),e._v(" を削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-one-catalog-data",e.dialogInfo.catalogName)}}})],1)])],1)])],1)]:e._e(),"selectDraftSelectedDelete"===e.dialogInfo.pageName?[a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.dialogInfo.isDisplay,callback:function(t){e.$set(e.dialogInfo,"isDisplay",t)},expression:"dialogInfo.isDisplay"}},[a("q-card",{staticStyle:{"max-width":"35%",width:"100%"}},[a("div",{staticClass:"q-pa-md"},[a("q-card-section",[a("div",{staticClass:"text-center",staticStyle:{"overflow-wrap":"break-word"}},[a("font",{attrs:{size:"3"}},[e._v("選択したデータを削除しますか？")])],1),a("div",{staticClass:"q-gutter-md row justify-center q-mt-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"light-blue-10 col",label:"キャンセル"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red col",label:"削除"},on:{click:function(t){return e.$emit("delete-selected-catalog-data")}}})],1)])],1)])],1)]:e._e()],2)},i=[],r={props:["dialogInfo"]},o=r,l=a("2877"),n=a("24e8"),c=a("f09f"),d=a("a370"),p=a("9c40"),f=a("7f67"),u=a("eebe"),m=a.n(u),g=Object(l["a"])(o,s,i,!1,null,null,null);t["a"]=g.exports;m()(g,"components",{QDialog:n["a"],QCard:c["a"],QCardSection:d["a"],QBtn:p["a"]}),m()(g,"directives",{ClosePopup:f["a"]})},da1b:function(e,t,a){}}]);